{% extends 'admin_p/base.html' %}
{% block body_block %}

<div class="container-fluid">
    <div class="header">
        <div class="page-title-box">
            <div class="row align-items-center">
                <div class="col-md-12">
                    <h4 class="page-title mb-0">Shipping Zones</h4>
                    <ol class="breadcrumb m-0">
                        <li class="breadcrumb-item"><a href="#">Shipping</a></li>
                        <li class="breadcrumb-item active"><a href="#">All Shipping Zones</a></li>
                    </ol>
                </div>
            </div>
        </div>
        <a href="{% url 'add_shipping_zone' %}" class="btn btn-primary"><i class="fas fa-plus"></i> Add Shipping Zone</a>
    </div>

    {% if shipping_zones %}
    <div class="table-container">

        <table class="table table-hover">
            <thead>
                <tr>
                    <th scope="col">Name</th>
                    <th scope="col">Country</th>
                    <th scope="col">State</th>
                    <th scope="col">City</th>
                    <th scope="col">Method</th>
                    <th scope="col">Cost</th>
                    <th scope="col">Free Shipping Limit</th>
                    <th scope="col">Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for zone in shipping_zones %}
                <tr>
                    <td>{{ zone.name }}</td>
                    <td>{{ zone.country }}</td>
                    <td>{{ zone.state }}</td>
                    <td>{{ zone.city }}</td>
                    
                    {% if zone.method == 'flat' %}
                    <td><span class="badge badge-primary">Flat</span></td>
                    {% else %}
                    
                    <td><span class="badge badge-success">Free Shipping</span></td>
                    {% endif %}

                    <td>{{ zone.cost }}</td>
                    <td>{% if zone.free_limit %} {{ zone.free_limit }} {% else %} N/A {% endif %}</td>
                    <td class="actions">
        
                        <a href="{% url 'delete-shipping-zone' zone.id %}" onclick="confirm('Are you sure to delete this Shipping Zone?')" class="btn btn-sm"><i class="fas fa-trash-alt"></i></a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

    </div>
    {% else %}
    <div class="alert alert-primary" role="alert">
        There are no shipping zones to show! <strong><a href="{% url 'add_shipping_zone' %}"> Add Shipping Zone</a></strong>
    </div>
    {% endif %}
    
    <div class="pagination-container text-right">
        <nav>
            <ul class="pagination justify-content-end">
                {% if shipping_zones.has_previous %}
                <li class="page-item"><a class="page-link" href="?page={{shipping_zones.previous_page_number}}">Previous</a></li>
                {% endif %}
                {% for n in total_pages %}
                {% if shipping_zones.number == n %}
                <li class="page-item active"><a class="page-link" href="?page={{n}}">{{n}}</a></li>
                {% else %}
                <li class="page-item"><a class="page-link" href="?page={{n}}">{{n}}</a></li>
                {% endif %}
                {% endfor %}
                {% if shipping_zones.has_next %}
                <li class="page-item"><a class="page-link" href="?page={{shipping_zones.next_page_number}}">Next</a></li>
                {% endif %}
            </ul>
        </nav>
    </div>
</div>


{% endblock %}
